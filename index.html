<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VANTYX - Login</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Your existing CSS files -->
  <link rel="stylesheet" href="assets/css/main.css">
  <link rel="stylesheet" href="assets/css/components.css">
  <link rel="stylesheet" href="assets/css/register.css">
  
  <style>
    :root {
      --primary-color: #4a90e2;
      --primary-dark: #357abd;
      --primary-light: #6ba3e8;
      --accent-color: #00ff41;
      --accent-red: #ff4444;
      --text-primary: #ffffff;
      --text-secondary: #b8c5d1;
      --text-muted: #8a9ba8;
      --bg-primary: #1a1a2e;
      --bg-secondary: #16213e;
      --glass-bg: rgba(255, 255, 255, 0.08);
      --glass-border: rgba(74, 144, 226, 0.3);
      --shadow-lg: 0 20px 60px rgba(0, 0, 0, 0.3);
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 24px;
      --spacing-xs: 0.25rem;
      --spacing-sm: 0.5rem;
      --spacing-md: 1rem;
      --spacing-lg: 1.5rem;
      --spacing-xl: 2rem;
      --spacing-xxl: 3rem;
    }

    /* Override Bootstrap theme */
    body {
      background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
      color: var(--text-primary);
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      min-height: 100vh;
    }

    /* Custom Bootstrap overrides */
    .btn-primary {
      --bs-btn-bg: linear-gradient(45deg, var(--primary-color), var(--primary-light));
      --bs-btn-border-color: var(--primary-color);
      --bs-btn-hover-bg: linear-gradient(45deg, var(--primary-dark), var(--primary-color));
      --bs-btn-hover-border-color: var(--primary-dark);
      --bs-btn-active-bg: var(--primary-dark);
      --bs-btn-active-border-color: var(--primary-dark);
      background: var(--bs-btn-bg);
      border: none;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .btn-primary:hover {
      background: var(--bs-btn-hover-bg);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(74, 144, 226, 0.4);
    }

    .btn-primary::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.6s ease;
    }

    .btn-primary:hover::before {
      left: 100%;
    }

    .form-control {
      background: rgba(255, 255, 255, 0.08);
      border: 2px solid rgba(74, 144, 226, 0.3);
      color: var(--text-primary);
      border-radius: var(--radius-md);
      padding: 0.75rem 1rem;
      backdrop-filter: blur(5px);
      transition: all 0.3s ease;
    }

    .form-control:focus {
      background: rgba(255, 255, 255, 0.12);
      border-color: var(--primary-color);
      box-shadow: 0 0 0 0.2rem rgba(74, 144, 226, 0.25), 0 0 20px rgba(74, 144, 226, 0.3);
      color: var(--text-primary);
      transform: translateY(-2px);
    }

    .form-control::placeholder {
      color: var(--text-muted);
      opacity: 0.7;
    }

    .form-label {
      color: var(--text-primary);
      font-weight: 600;
      font-size: 0.875rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 0.5rem;
    }

    /* Enhanced login section */
    .login-section {
      min-height: 100vh;
      background: 
        radial-gradient(circle at 20% 80%, rgba(74, 144, 226, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(0, 255, 65, 0.1) 0%, transparent 50%),
        linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
      position: relative;
      overflow: hidden;
    }

    .login-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><defs><pattern id="grid" width="50" height="50" patternUnits="userSpaceOnUse"><path d="M 50 0 L 0 0 0 50" fill="none" stroke="rgba(74,144,226,0.1)" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(%23grid)"/></svg>');
      opacity: 0.2;
      animation: gridMove 30s linear infinite;
    }

    @keyframes gridMove {
      0% { transform: translate(0, 0); }
      100% { transform: translate(50px, 50px); }
    }

    .login-card {
      background: var(--glass-bg);
      border: 2px solid var(--glass-border);
      backdrop-filter: blur(20px);
      box-shadow: var(--shadow-lg);
      position: relative;
      z-index: 10;
      animation: slideUp 0.8s ease-out;
      border-radius: var(--radius-xl) !important;
    }

    .login-card::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, var(--primary-color), var(--accent-color), var(--primary-color));
      border-radius: var(--radius-xl);
      z-index: -1;
      opacity: 0.4;
      animation: borderPulse 3s ease-in-out infinite;
    }

    @keyframes borderPulse {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 0.6; }
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .brand-title {
      font-size: 3.5rem;
      font-weight: 900;
      text-shadow: 0 0 30px rgba(74, 144, 226, 0.5);
      background: linear-gradient(45deg, #4a90e2, #00ff41, #4a90e2);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: titleGradient 4s ease-in-out infinite;
      letter-spacing: 3px;
    }

    @keyframes titleGradient {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .login-title {
      color: var(--text-primary);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 2px;
      opacity: 0.9;
    }

    /* Alert overrides */
    .alert-danger {
      background: rgba(255, 68, 68, 0.1);
      border: 1px solid var(--accent-red);
      color: var(--accent-red);
      border-radius: var(--radius-md);
    }

    .alert-success {
      background: rgba(0, 255, 65, 0.1);
      border: 1px solid var(--accent-color);
      color: var(--accent-color);
      border-radius: var(--radius-md);
    }

    /* Link styling */
    .text-primary {
      color: var(--primary-color) !important;
    }

    .text-primary:hover {
      color: var(--primary-light) !important;
      text-decoration: underline !important;
    }

    .text-muted {
      color: var(--text-secondary) !important;
    }

    /* Loading spinner */
    .spinner-border-sm {
      width: 1rem;
      height: 1rem;
      border-width: 0.15em;
    }

    /* Floating elements */
    .floating-element {
      position: absolute;
      opacity: 0.1;
      animation: float 6s ease-in-out infinite;
      font-size: 2rem;
      z-index: 1;
    }

    .floating-element:nth-child(1) {
      top: 10%;
      left: 10%;
      animation-delay: 0s;
    }

    .floating-element:nth-child(2) {
      top: 20%;
      right: 15%;
      animation-delay: 2s;
    }

    .floating-element:nth-child(3) {
      bottom: 15%;
      left: 20%;
      animation-delay: 4s;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }

    /* Input group styling */
    .input-group-text {
      background: rgba(255, 255, 255, 0.08);
      border: 2px solid rgba(74, 144, 226, 0.3);
      border-right: none;
      color: var(--text-secondary);
    }

    .input-group .form-control {
      border-left: none;
    }

    .input-group:focus-within .input-group-text {
      border-color: var(--primary-color);
      background: rgba(255, 255, 255, 0.12);
    }

    /* Custom animations */
    .fade-in {
      animation: fadeIn 0.6s ease-out;
    }

    .fade-in-delayed {
      animation: fadeIn 0.6s ease-out 0.3s both;
    }

    .fade-in-delayed-2 {
      animation: fadeIn 0.6s ease-out 0.6s both;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Footer styling */
    .footer {
      background: var(--bg-secondary);
      border-top: 1px solid rgba(74, 144, 226, 0.2);
      margin-top: auto;
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: var(--spacing-xl);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: var(--spacing-lg);
    }

    .disclaimer {
      flex: 1;
      min-width: 300px;
    }

    .disclaimer p {
      color: var(--text-muted);
      font-size: 0.8rem;
      margin: 0;
      line-height: 1.4;
    }

    .footer-controls {
      display: flex;
      align-items: center;
      gap: var(--spacing-lg);
    }

    .language-dropdown {
      background: var(--glass-bg);
      border: 1px solid rgba(74, 144, 226, 0.3);
      color: var(--text-primary);
      border-radius: var(--radius-sm);
      padding: var(--spacing-xs) var(--spacing-sm);
    }

    .theme-toggle {
      width: 50px;
      height: 25px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      position: relative;
      cursor: pointer;
      border: 1px solid rgba(74, 144, 226, 0.3);
    }

    .toggle-slider {
      width: 20px;
      height: 20px;
      background: var(--primary-color);
      border-radius: 50%;
      position: absolute;
      top: 2px;
      left: 2px;
      transition: transform 0.3s ease;
    }

    .company-logo .logo-text {
      font-weight: 900;
      color: var(--primary-color);
      font-size: 1.2rem;
      letter-spacing: 2px;
    }

    /* Enhanced responsive design for large screens */
    .brand-showcase {
      animation: fadeInLeft 1s ease-out;
    }

    .feature-card {
      transition: all 0.3s ease;
      animation: fadeInUp 0.8s ease-out;
    }

    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .feature-card:nth-child(1) { animation-delay: 0.2s; }
    .feature-card:nth-child(2) { animation-delay: 0.4s; }
    .feature-card:nth-child(3) { animation-delay: 0.6s; }

    @keyframes fadeInLeft {
      from { opacity: 0; transform: translateX(-50px); }
      to { opacity: 1; transform: translateX(0); }
    }

    /* Large screen optimizations */
    @media (min-width: 992px) {
      .login-section {
        padding: 0;
      }
      
      .login-card {
        max-width: none;
        transform: translateX(20px);
      }
      
      .brand-showcase {
        padding-right: 3rem;
      }
    }

    @media (min-width: 1200px) {
      .brand-showcase {
        padding-right: 5rem;
      }
      
      .login-card {
        transform: translateX(30px);
      }
    }

    @media (min-width: 1400px) {
      .brand-showcase {
        padding-right: 8rem;
      }
      
      .login-card {
        transform: translateX(40px);
      }
    }
  </style>
</head>
<body class="dark-theme d-flex flex-column">
  <!-- Floating background elements -->
  <div class="floating-element">üìà</div>
  <div class="floating-element">üíπ</div>
  <div class="floating-element">üìä</div>

  <!-- Header Navigation will be created by JavaScript -->

  <!-- Login Form -->
  <main class="flex-grow-1">
    <section class="login-section d-flex align-items-center justify-content-center">
      <div class="container-fluid">
        <div class="row justify-content-center align-items-center min-vh-100">
          <!-- Left Column - Brand/Info (Hidden on small screens) -->
          <div class="col-lg-7 col-xl-8 d-none d-lg-flex flex-column justify-content-center align-items-center text-center p-5">
            <div class="brand-showcase fade-in">
              <h1 class="display-1 fw-bold mb-4" style="font-size: 5rem; background: linear-gradient(45deg, #4a90e2, #00ff41, #4a90e2); background-size: 200% 200%; -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; animation: titleGradient 4s ease-in-out infinite;">
                VANTYX
              </h1>
              <h2 class="h3 text-primary mb-4 fw-semibold">Advanced Trading Platform</h2>
              <p class="lead text-muted mb-5 px-lg-5" style="max-width: 600px;">
                Experience next-generation trading with real-time analytics, advanced charting, 
                and intelligent portfolio management designed for modern investors.
              </p>
              
              <!-- Feature highlights -->
              <div class="row g-4 mt-4">
                <div class="col-md-4">
                  <div class="feature-card h-100 p-4" style="background: rgba(74, 144, 226, 0.1); border-radius: var(--radius-lg); border: 1px solid rgba(74, 144, 226, 0.3);">
                    <div class="feature-icon mb-3" style="font-size: 2.5rem;">üìä</div>
                    <h5 class="text-primary">Real-time Analytics</h5>
                    <p class="text-muted mb-0 small">Advanced market data and insights at your fingertips</p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="feature-card h-100 p-4" style="background: rgba(0, 255, 65, 0.1); border-radius: var(--radius-lg); border: 1px solid rgba(0, 255, 65, 0.3);">
                    <div class="feature-icon mb-3" style="font-size: 2.5rem;">üîí</div>
                    <h5 class="text-success">Bank-grade Security</h5>
                    <p class="text-muted mb-0 small">Your investments protected with enterprise security</p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="feature-card h-100 p-4" style="background: rgba(255, 193, 7, 0.1); border-radius: var(--radius-lg); border: 1px solid rgba(255, 193, 7, 0.3);">
                    <div class="feature-icon mb-3" style="font-size: 2.5rem;">‚ö°</div>
                    <h5 class="text-warning">Lightning Fast</h5>
                    <p class="text-muted mb-0 small">Execute trades in milliseconds with our optimized platform</p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Right Column - Login Form -->
          <div class="col-12 col-sm-8 col-md-6 col-lg-5 col-xl-4">
            <div class="card login-card border-0 shadow-lg">
              <div class="card-body p-4 p-md-5">
                <!-- Brand Title (Only shown on small screens) -->
                <h1 class="brand-title text-center mb-4 fade-in d-lg-none">VANTYX</h1>
                
                <!-- Login Form -->
                <div class="fade-in-delayed">
                  <h2 class="login-title text-center h4 mb-4">Welcome Back</h2>
                  
                  <form id="loginForm" class="needs-validation" novalidate>
                    <!-- Customer ID Input -->
                    <div class="mb-3">
                      <label for="customerId" class="form-label">
                        <i class="bi bi-person-badge me-1"></i>
                        Customer ID
                      </label>
                      <div class="input-group">
                        <span class="input-group-text">
                          <i class="bi bi-person"></i>
                        </span>
                        <input 
                          type="text" 
                          class="form-control" 
                          id="customerId" 
                          name="customerId" 
                          required 
                          placeholder="Enter your Customer ID"
                          autocomplete="username"
                        >
                        <div class="invalid-feedback">
                          Please provide a valid customer ID.
                        </div>
                      </div>
                    </div>

                    <!-- PIN Input -->
                    <div class="mb-4">
                      <label for="pin" class="form-label">
                        <i class="bi bi-shield-lock me-1"></i>
                        PIN
                      </label>
                      <div class="input-group">
                        <span class="input-group-text">
                          <i class="bi bi-lock"></i>
                        </span>
                        <input 
                          type="password" 
                          class="form-control" 
                          id="pin" 
                          name="pin" 
                          required 
                          maxlength="8" 
                          placeholder="Enter your PIN"
                          autocomplete="current-password"
                        >
                        <button 
                          class="btn btn-outline-secondary" 
                          type="button" 
                          id="togglePin"
                          style="border-color: rgba(74, 144, 226, 0.3); background: rgba(255, 255, 255, 0.08); color: var(--text-secondary);"
                        >
                          <i class="bi bi-eye" id="pinToggleIcon"></i>
                        </button>
                        <div class="invalid-feedback">
                          Please provide a valid PIN.
                        </div>
                      </div>
                    </div>

                    <!-- Remember Me Checkbox -->
                    <div class="mb-3">
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="rememberMe" name="rememberMe">
                        <label class="form-check-label text-muted" for="rememberMe">
                          Remember me for 30 days
                        </label>
                      </div>
                    </div>

                    <!-- Submit Button -->
                    <div class="d-grid mb-3">
                      <button type="submit" class="btn btn-primary btn-lg" id="loginBtn">
                        <span class="btn-text">
                          <i class="bi bi-box-arrow-in-right me-2"></i>
                          Sign In
                        </span>
                        <span class="btn-loader d-none">
                          <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                          Signing in...
                        </span>
                      </button>
                    </div>

                    <!-- Error/Success Messages -->
                    <div class="alert alert-danger d-none" id="errorMessage" role="alert">
                      <i class="bi bi-exclamation-triangle me-2"></i>
                      <span id="errorText"></span>
                    </div>
                    
                    <div class="alert alert-success d-none" id="successMessage" role="alert">
                      <i class="bi bi-check-circle me-2"></i>
                      <span id="successText"></span>
                    </div>
                  </form>
                </div>

                <!-- Additional Links -->
                <div class="text-center fade-in-delayed-2">
                  <hr class="my-4" style="border-color: rgba(74, 144, 226, 0.3);">
                  <p class="text-muted mb-2">
                    Don't have an account? 
                    <a href="register.html" class="text-primary text-decoration-none fw-semibold">
                      Create one here
                    </a>
                  </p>
                  <p class="text-muted mb-0">
                    <a href="#" class="text-primary text-decoration-none" data-bs-toggle="modal" data-bs-target="#helpModal">
                      <i class="bi bi-question-circle me-1"></i>
                      Need help?
                    </a>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Help Modal -->
  <div class="modal fade" id="helpModal" tabindex="-1" aria-labelledby="helpModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content" style="background: var(--glass-bg); border: 2px solid var(--glass-border); backdrop-filter: blur(20px);">
        <div class="modal-header border-bottom" style="border-color: rgba(74, 144, 226, 0.3) !important;">
          <h5 class="modal-title text-primary" id="helpModalLabel">
            <i class="bi bi-question-circle me-2"></i>
            Need Help?
          </h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="row g-3">
            <div class="col-12">
              <div class="card bg-transparent border-0">
                <div class="card-body p-3" style="background: rgba(74, 144, 226, 0.1); border-radius: var(--radius-md);">
                  <h6 class="text-primary mb-2">
                    <i class="bi bi-person-badge me-2"></i>
                    Customer ID
                  </h6>
                  <p class="text-muted mb-0 small">
                    Your unique customer identifier provided during registration. Usually starts with "VYX" followed by numbers.
                  </p>
                </div>
              </div>
            </div>
            <div class="col-12">
              <div class="card bg-transparent border-0">
                <div class="card-body p-3" style="background: rgba(0, 255, 65, 0.1); border-radius: var(--radius-md);">
                  <h6 class="text-success mb-2">
                    <i class="bi bi-shield-lock me-2"></i>
                    PIN
                  </h6>
                  <p class="text-muted mb-0 small">
                    Your 4-8 digit personal identification number. Keep this secure and don't share with anyone.
                  </p>
                </div>
              </div>
            </div>
          </div>
          <hr style="border-color: rgba(74, 144, 226, 0.3);">
          <div class="text-center">
            <p class="text-muted mb-2">Still having trouble?</p>
            <div class="d-flex gap-2 justify-content-center flex-wrap">
              <a href="mailto:support@vantyx.com" class="btn btn-outline-primary btn-sm">
                <i class="bi bi-envelope me-1"></i>
                Email Support
              </a>
              <a href="tel:+1-800-VANTYX" class="btn btn-outline-success btn-sm">
                <i class="bi bi-telephone me-1"></i>
                Call Us
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer mt-auto">
    <div class="footer-content">
      <div class="disclaimer">
        <p>VANTYX is not a registered broker-dealer or investment advisor. Trading involves risk 
        and may result in financial loss. Market data is provided for informational purposes 
        only and is not intended for trading or investment advice.</p>
      </div>
      
      <div class="footer-controls">
        <div class="language-selector">
          <select id="languageSelect" class="language-dropdown">
            <option value="en">English(US)</option>
            <option value="de">Deutsch</option>
            <option value="fr">Fran√ßais</option>
            <option value="es">Espa√±ol</option>
          </select>
        </div>
        
        <div class="theme-toggle" id="themeToggle">
          <span class="toggle-slider"></span>
        </div>
        
        <div class="company-logo">
          <span class="logo-text">VYX</span>
        </div>
      </div>
    </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Your existing JavaScript Files -->
  <script src="assets/js/utils.js"></script>
  <script src="assets/js/auth.js"></script>
  <script src="assets/js/yahoo-finance.js"></script>
  <script src="assets/js/chart-utils.js"></script>
  <script src="assets/js/stock-page.js"></script>
  <script src="assets/js/navbar.js"></script>
  <script src="assets/js/main.js"></script>

  <!-- Enhanced Login Functionality -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üöÄ Bootstrap-enhanced login page loaded');

      // Initialize form validation
      const forms = document.querySelectorAll('.needs-validation');
      const loginForm = document.getElementById('loginForm');
      const loginBtn = document.getElementById('loginBtn');
      const errorMessage = document.getElementById('errorMessage');
      const successMessage = document.getElementById('successMessage');
      const togglePin = document.getElementById('togglePin');
      const pinInput = document.getElementById('pin');
      const pinToggleIcon = document.getElementById('pinToggleIcon');

      // Bootstrap form validation
      Array.prototype.slice.call(forms).forEach(function(form) {
        form.addEventListener('submit', function(event) {
          event.preventDefault();
          event.stopPropagation();

          if (form.checkValidity()) {
            handleLogin();
          } else {
            // Show validation errors
            showError('Please fill in all required fields correctly.');
          }

          form.classList.add('was-validated');
        }, false);
      });

      // PIN visibility toggle
      togglePin.addEventListener('click', function() {
        const type = pinInput.getAttribute('type') === 'password' ? 'text' : 'password';
        pinInput.setAttribute('type', type);
        
        if (type === 'text') {
          pinToggleIcon.className = 'bi bi-eye-slash';
        } else {
          pinToggleIcon.className = 'bi bi-eye';
        }
      });

      // Enhanced login handling with better error handling
      function handleLogin() {
        const customerId = document.getElementById('customerId').value.trim();
        const pin = document.getElementById('pin').value.trim();
        const rememberMe = document.getElementById('rememberMe').checked;

        console.log('üîê Attempting login with:', { customerId, pinLength: pin.length });

        // Validate inputs
        if (!customerId || !pin) {
          showError('Please enter both Customer ID and PIN.');
          return;
        }

        if (pin.length < 4) {
          showError('PIN must be at least 4 digits.');
          return;
        }

        // Show loading state
        setLoading(true);
        hideMessages();

        // Ensure auth system is ready before attempting login
        setTimeout(() => {
          try {
            // Make sure we have the auth system
            if (typeof window.auth === 'undefined') {
              console.log('‚ö†Ô∏è Auth system not found, initializing...');
              
              // Try to initialize auth system
              if (typeof window.AuthManager !== 'undefined') {
                window.auth = new window.AuthManager();
                console.log('‚úÖ Auth system initialized');
              } else {
                throw new Error('AuthManager not available');
              }
            }

            // Debug: Check if user exists
            const users = JSON.parse(localStorage.getItem('vantyx_users') || '[]');
            console.log('üë• Available users:', users.map(u => ({ id: u.customerId, email: u.email })));
            
            const foundUser = users.find(u => u.customerId === customerId);
            if (foundUser) {
              console.log('üë§ Found user:', { id: foundUser.customerId, email: foundUser.email });
              console.log('üîë PIN match:', foundUser.pin === pin);
            } else {
              console.log('‚ùå User not found with ID:', customerId);
            }

            // Call the real authentication system
            const result = window.auth.login(customerId, pin);
            console.log('üîê Login result:', result);
            
            if (result.success) {
              // Success
              console.log('‚úÖ Login successful!');
              showSuccess('Login successful! Redirecting to dashboard...');
              
              // Store remember me preference
              if (rememberMe) {
                localStorage.setItem('vantyx_remember', 'true');
                localStorage.setItem('vantyx_customer_id', customerId);
              } else {
                localStorage.removeItem('vantyx_remember');
                localStorage.removeItem('vantyx_customer_id');
              }

              // Redirect after delay
              setTimeout(() => {
                window.location.href = 'dashboard.html';
              }, 1500);
              
            } else {
              // Failure
              console.log('‚ùå Login failed:', result.error);
              showError(result.error || 'Invalid Customer ID or PIN. Please try again.');
              setLoading(false);
            }
            
          } catch (error) {
            console.error('üí• Login error:', error);
            showError('Login system error. Please refresh the page and try again.');
            setLoading(false);
          }
        }, 500); // Small delay for better UX and to ensure DOM is ready
      }

      function setLoading(loading) {
        const btnText = loginBtn.querySelector('.btn-text');
        const btnLoader = loginBtn.querySelector('.btn-loader');
        
        if (loading) {
          btnText.classList.add('d-none');
          btnLoader.classList.remove('d-none');
          loginBtn.disabled = true;
        } else {
          btnText.classList.remove('d-none');
          btnLoader.classList.add('d-none');
          loginBtn.disabled = false;
        }
      }

      function showError(message) {
        hideMessages();
        document.getElementById('errorText').textContent = message;
        errorMessage.classList.remove('d-none');
        errorMessage.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }

      function showSuccess(message) {
        hideMessages();
        document.getElementById('successText').textContent = message;
        successMessage.classList.remove('d-none');
        successMessage.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }

      function hideMessages() {
        errorMessage.classList.add('d-none');
        successMessage.classList.add('d-none');
      }

      // Auto-hide messages after 5 seconds
      function autoHideMessage(element) {
        setTimeout(() => {
          if (!element.classList.contains('d-none')) {
            element.classList.add('d-none');
          }
        }, 5000);
      }

      // Check for remembered credentials and ensure auth system is ready
      function initializeAuth() {
        console.log('üîÑ Initializing auth system...');
        
        // Initialize AuthManager if not already initialized
        if (typeof window.AuthManager !== 'undefined' && !window.auth) {
          console.log('üìù Creating AuthManager instance...');
          window.auth = new window.AuthManager();
        }
        
        // Wait for auth system to be ready
        if (typeof window.auth === 'undefined') {
          console.log('‚è≥ Auth system not ready, waiting...');
          setTimeout(initializeAuth, 200);
          return;
        }

        console.log('‚úÖ Auth system ready');

        // Check if user is already logged in
        if (window.auth.isLoggedIn()) {
          console.log('üîÑ User already logged in, redirecting...');
          window.location.href = 'dashboard.html';
          return;
        }

        // Load remembered credentials if available
        if (localStorage.getItem('vantyx_remember') === 'true') {
          const rememberedId = localStorage.getItem('vantyx_customer_id');
          if (rememberedId) {
            document.getElementById('customerId').value = rememberedId;
            document.getElementById('rememberMe').checked = true;
            // Focus on PIN field for convenience
            setTimeout(() => {
              document.getElementById('pin').focus();
            }, 100);
          }
        }

        console.log('üéØ Login page ready for user input');
      }

      // Initialize demo users for testing (since no backend/database)
      function initializeDemoUsers() {
        const existingUsers = JSON.parse(localStorage.getItem('vantyx_users') || '[]');
        
        // Always show demo modal if users exist (for convenience)
        if (existingUsers.length > 0) {
          console.log('‚úÖ Users already exist:', existingUsers);
          
          // Show credentials modal for easy access
          setTimeout(() => {
            showDemoCredentials(existingUsers);
          }, 1500); // Delay to let page load
          
          return;
        }
        
        // If no users exist, create demo users
        const demoUsers = [
          {
            customerId: 'VYX123456',
            email: 'demo@vantyx.com',
            pin: '123456',
            balance: 50000,
            portfolio: {
              'AAPL': { shares: 10, avgPrice: 150.00 },
              'MSFT': { shares: 5, avgPrice: 300.00 },
              'GOOGL': { shares: 3, avgPrice: 120.00 }
            },
            watchlist: ['TSLA', 'NVDA', 'AMD'],
            createdAt: new Date().toISOString()
          },
          {
            customerId: 'VYX789012',
            email: 'trader@vantyx.com',
            pin: '789012',
            balance: 25000,
            portfolio: {
              'TSLA': { shares: 8, avgPrice: 250.00 },
              'NVDA': { shares: 15, avgPrice: 400.00 }
            },
            watchlist: ['AAPL', 'META', 'NFLX'],
            createdAt: new Date().toISOString()
          },
          {
            customerId: 'VYX999888',
            email: 'investor@vantyx.com',
            pin: '999888',
            balance: 100000,
            portfolio: {},
            watchlist: [],
            createdAt: new Date().toISOString()
          }
        ];
        
        localStorage.setItem('vantyx_users', JSON.stringify(demoUsers));
        console.log('‚úÖ Demo users created:', demoUsers);
        
        // Show demo credentials to user
        setTimeout(() => {
          showDemoCredentials(demoUsers);
        }, 1000);
      }

      // Show demo credentials in a helpful way
      function showDemoCredentials(users) {
        const credentialsHtml = users.map((user, index) => `
          <div class="demo-user" style="
            background: rgba(74, 144, 226, 0.1); 
            border: 1px solid rgba(74, 144, 226, 0.3);
            border-radius: 8px; 
            padding: 12px; 
            margin: 8px 0;
            cursor: pointer;
            transition: all 0.3s ease;
          " onclick="fillDemoCredentials('${user.customerId}', '${user.pin}')">
            <div style="font-weight: bold; color: var(--primary-color);">Demo User ${index + 1}</div>
            <div style="font-size: 0.9em; color: var(--text-secondary);">
              ID: ${user.customerId} | PIN: ${user.pin}
            </div>
            <div style="font-size: 0.8em; color: var(--text-muted);">
              Balance: ${user.balance.toLocaleString()} | Email: ${user.email}
            </div>
            <div style="font-size: 0.7em; color: var(--accent-color); margin-top: 4px;">
              Click to auto-fill credentials
            </div>
          </div>
        `).join('');

        // Create demo credentials modal
        const demoModal = document.createElement('div');
        demoModal.className = 'modal fade show';
        demoModal.style.cssText = `
          display: flex !important;
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.8);
          z-index: 20000;
          align-items: center;
          justify-content: center;
        `;
        
        demoModal.innerHTML = `
          <div class="modal-dialog modal-lg">
            <div class="modal-content" style="
              background: var(--glass-bg); 
              border: 2px solid var(--glass-border); 
              backdrop-filter: blur(20px);
              border-radius: var(--radius-xl);
            ">
              <div class="modal-header border-bottom" style="border-color: rgba(74, 144, 226, 0.3) !important;">
                <h5 class="modal-title text-primary">
                  <i class="bi bi-info-circle me-2"></i>
                  Demo Credentials Available
                </h5>
                <button type="button" class="btn-close btn-close-white" onclick="closeDemoModal()"></button>
              </div>
              <div class="modal-body">
                <div class="alert alert-info" style="
                  background: rgba(74, 144, 226, 0.1);
                  border: 1px solid rgba(74, 144, 226, 0.3);
                  color: var(--text-primary);
                ">
                  <i class="bi bi-lightbulb me-2"></i>
                  <strong>No Backend Required!</strong> Since this is a demo without a backend database, 
                  we've created some demo users for you to test with. Click any user below to auto-fill the login form.
                </div>
                
                <h6 class="text-primary mb-3">Available Demo Users:</h6>
                <div class="demo-users-container">
                  ${credentialsHtml}
                </div>
                
                <hr style="border-color: rgba(74, 144, 226, 0.3);">
                <div class="text-center">
                  <p class="text-muted mb-2">
                    <i class="bi bi-gear me-1"></i>
                    You can also register new users through the registration page.
                  </p>
                  <a href="register.html" class="btn btn-outline-primary btn-sm">
                    <i class="bi bi-person-plus me-1"></i>
                    Create New Account
                  </a>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeDemoModal()">
                  I'll Enter Manually
                </button>
              </div>
            </div>
          </div>
        `;
        
        document.body.appendChild(demoModal);
        
        // Add to global scope for easy access
        window.demoModal = demoModal;
      }

      // Fill demo credentials into form
      window.fillDemoCredentials = function(customerId, pin) {
        document.getElementById('customerId').value = customerId;
        document.getElementById('pin').value = pin;
        closeDemoModal();
        
        // Show success message
        showSuccess(`Demo credentials filled! Customer ID: ${customerId}`);
        setTimeout(() => {
          hideMessages();
        }, 3000);
      };

      // Close demo modal
      window.closeDemoModal = function() {
        if (window.demoModal) {
          window.demoModal.remove();
          window.demoModal = null;
        }
      };

      // Initialize demo users first
      initializeDemoUsers();

      // Enhanced keyboard shortcuts
      document.addEventListener('keydown', function(e) {
        // Enter key to submit form
        if (e.key === 'Enter' && !e.shiftKey && !e.ctrlKey) {
          const activeElement = document.activeElement;
          if (activeElement.tagName === 'INPUT') {
            e.preventDefault();
            loginForm.dispatchEvent(new Event('submit'));
          }
        }

        // Escape key to clear form
        if (e.key === 'Escape') {
          clearForm();
        }

        // F1 for help
        if (e.key === 'F1') {
          e.preventDefault();
          const helpModal = new bootstrap.Modal(document.getElementById('helpModal'));
          helpModal.show();
        }
      });

      function clearForm() {
        loginForm.reset();
        loginForm.classList.remove('was-validated');
        hideMessages();
        document.getElementById('customerId').focus();
      }

      // Enhanced input formatting
      const customerIdInput = document.getElementById('customerId');
      customerIdInput.addEventListener('input', function(e) {
        // Auto-format customer ID (uppercase)
        let value = e.target.value.toUpperCase();
        
        // Remove any non-alphanumeric characters except hyphens
        value = value.replace(/[^A-Z0-9-]/g, '');
        
        // Auto-add VYX prefix if not present and user starts typing numbers
        if (value.length > 0 && !value.startsWith('VYX') && /^\d/.test(value)) {
          value = 'VYX' + value;
        }
        
        e.target.value = value;
      });

      // PIN input restrictions
      const pinInputField = document.getElementById('pin');
      pinInputField.addEventListener('input', function(e) {
        // Only allow numbers
        let value = e.target.value.replace(/\D/g, '');
        
        // Limit to 8 digits
        if (value.length > 8) {
          value = value.substring(0, 8);
        }
        
        e.target.value = value;
      });

      // Auto-submit when PIN is complete (8 digits)
      pinInputField.addEventListener('input', function(e) {
        if (e.target.value.length === 8) {
          const customerIdValue = document.getElementById('customerId').value.trim();
          if (customerIdValue.length > 0) {
            // Small delay to allow user to see the complete PIN
            setTimeout(() => {
              loginForm.dispatchEvent(new Event('submit'));
            }, 500);
          }
        }
      });

      // Enhanced tooltip initialization
      const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
      const tooltipList = tooltipTriggerList.map(function(tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
      });

      // Add smooth scroll behavior for better UX
      document.documentElement.style.scrollBehavior = 'smooth';

      // Add focus management for accessibility
      const firstInput = document.getElementById('customerId');
      setTimeout(() => {
        firstInput.focus();
      }, 500);

      // Monitor connection status
      function checkConnection() {
        if (!navigator.onLine) {
          showError('No internet connection. Please check your network and try again.');
        }
      }

      window.addEventListener('online', function() {
        hideMessages();
        showSuccess('Connection restored!');
        setTimeout(hideMessages, 3000);
      });

      window.addEventListener('offline', function() {
        showError('Connection lost. Please check your internet connection.');
      });

      // Initial connection check
      checkConnection();

      // Add performance monitoring
      window.addEventListener('load', function() {
        // Log performance metrics
        if (typeof performance !== 'undefined' && performance.timing) {
          const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
          console.log(`üìä Page load time: ${loadTime}ms`);
        }
      });

      // Add security enhancements
      function enhanceSecurity() {
        // Disable right-click context menu on sensitive inputs
        [customerIdInput, pinInputField].forEach(input => {
          input.addEventListener('contextmenu', function(e) {
            e.preventDefault();
          });
        });

        // Clear clipboard after paste to prevent PIN theft
        pinInputField.addEventListener('paste', function(e) {
          setTimeout(() => {
            if (navigator.clipboard && navigator.clipboard.writeText) {
              navigator.clipboard.writeText('').catch(() => {
                // Clipboard clear failed, that's okay
              });
            }
          }, 1000);
        });

        // Warn about caps lock
        [customerIdInput, pinInputField].forEach(input => {
          input.addEventListener('keydown', function(e) {
            if (e.getModifierState && e.getModifierState('CapsLock')) {
              // You could show a small warning here
              console.log('‚ö†Ô∏è Caps Lock is on');
            }
          });
        });
      }

      enhanceSecurity();

      // Add session timeout warning
      let sessionTimeout;
      function resetSessionTimeout() {
        clearTimeout(sessionTimeout);
        // Set timeout for 30 minutes of inactivity
        sessionTimeout = setTimeout(() => {
          if (document.getElementById('customerId').value || document.getElementById('pin').value) {
            const confirmClear = confirm('For security reasons, the form will be cleared due to inactivity. Continue?');
            if (confirmClear) {
              clearForm();
              showError('Form cleared for security. Please try again.');
            }
          }
        }, 30 * 60 * 1000); // 30 minutes
      }

      // Reset timeout on user activity
      ['mousedown', 'keydown', 'touchstart', 'scroll'].forEach(event => {
        document.addEventListener(event, resetSessionTimeout, true);
      });

      resetSessionTimeout();

      // Debug function to check users and test login manually
      function debugLogin() {
        console.log('üîç === DEBUG LOGIN SYSTEM ===');
        
        // Check localStorage users
        const users = JSON.parse(localStorage.getItem('vantyx_users') || '[]');
        console.log('üë• Users in localStorage:', users);
        
        // Check if AuthManager exists
        console.log('üîß AuthManager available:', typeof window.AuthManager !== 'undefined');
        console.log('üîß Auth instance available:', typeof window.auth !== 'undefined');
        
        // Try to create auth if missing
        if (typeof window.AuthManager !== 'undefined' && !window.auth) {
          try {
            window.auth = new window.AuthManager();
            console.log('‚úÖ Auth instance created successfully');
          } catch (error) {
            console.error('‚ùå Failed to create auth instance:', error);
          }
        }
        
        // Test login with first demo user
        if (users.length > 0 && window.auth) {
          const testUser = users[0];
          console.log(`üß™ Testing login with: ${testUser.customerId} / ${testUser.pin}`);
          
          try {
            const result = window.auth.login(testUser.customerId, testUser.pin);
            console.log('üß™ Test login result:', result);
            
            if (result.success) {
              console.log('‚úÖ Test login successful!');
              // Logout immediately to not interfere
              window.auth.logout();
            } else {
              console.log('‚ùå Test login failed:', result.error);
            }
          } catch (error) {
            console.error('üí• Test login error:', error);
          }
        }
        
        console.log('üîç === END DEBUG ===');
        return { users, authAvailable: typeof window.auth !== 'undefined' };
      }

      // Add debug button for development
      if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
        const debugLoginBtn = document.createElement('button');
        debugLoginBtn.textContent = 'üîç Debug Login';
        debugLoginBtn.style.cssText = `
          position: fixed;
          top: 50px;
          right: 10px;
          z-index: 9999;
          background: rgba(255, 68, 68, 0.8);
          color: white;
          border: none;
          padding: 8px 12px;
          border-radius: 4px;
          font-size: 12px;
          cursor: pointer;
        `;
        debugLoginBtn.onclick = debugLogin;
        document.body.appendChild(debugLoginBtn);
      }
    });

    // Global functions for external access
    window.clearLoginForm = function() {
      document.getElementById('loginForm').reset();
      document.getElementById('loginForm').classList.remove('was-validated');
      document.getElementById('errorMessage').classList.add('d-none');
      document.getElementById('successMessage').classList.add('d-none');
    };

    window.focusLogin = function() {
      document.getElementById('customerId').focus();
    };

    // Export for debugging
    window.loginDebug = {
      clearForm: window.clearLoginForm,
      focusLogin: window.focusLogin,
      version: '1.0.0'
    };

    console.log('üéØ VANTYX Bootstrap Login System Ready!');
    console.log('üîß Debug tools available at window.loginDebug');
  </script>
</body>
</html>